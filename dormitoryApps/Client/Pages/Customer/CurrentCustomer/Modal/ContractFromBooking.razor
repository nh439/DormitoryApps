@using Blazorise;
@using dormitoryApps.Shared.Model.Entity;
@using dormitoryApps.Client.Services;
@using System.Timers;
@inject CurrentCustomerService _currentCustomerService;
@inject RoomServices _roomServices;
@inject OfficerServices _officerServices;
@inject SessionServices _sessionServices;
@inject BuildingServices _buildingServices;
@inject InvoiceServices _invoiceServices;
@code {
    Modal e;
    CurrentCustomer item = new CurrentCustomer
        {
            Members = new List<RentalMember>()
        };
    Officer currentOfficer = new Officer();
    Room room = new Room();
    Buildings buildings = new Buildings();
    Invoice bookingInvoice = new Invoice() { Services = new List<InvoiceService>() };
    Officer bookingOfficer = new Officer();
    string rentalmode;
    bool isloading = true;
    bool isMonthly = true;
    public async void Open(string rentalId)
    {
        await e.Show();
        bool isMonthly = true;
        item = await _currentCustomerService.Get(rentalId);
        room = await _roomServices.GetRoom(item.RoomId);
        buildings = await _buildingServices.Get(room.Building);
        bookingOfficer = await _officerServices.GetById(item.EmployeeId);
        currentOfficer = await _sessionServices.GetCurrentLogin();
        isloading = false;
        if (item.RentalType.Equals("Monthly")) rentalmode = "เช่าแบบรายเดือน";
        else if (item.RentalType.Equals("Monthly"))
        { 
            rentalmode = "เช่าแบบรายวัน"; 
            isMonthly = false; 
        }
        else
        {
            rentalmode = "ไม่ระบุวิธีการเช่า";
            isMonthly = false;
        }
        StateHasChanged();

    }

}

<Modal @ref="e" Style="color:black">
    <ModalContent Size="ModalSize.Large">
        <ModalHeader>
            <CloseButton></CloseButton>
        </ModalHeader>
        <ModalBody>
            <center>
                <h1>ทำสัญญาเข้าพัก</h1>
            </center>
            <br />
            <br />
            <Div Class="row">
                <Div Class="col">
                    <div class="form-group">
                        <label for="text">รหัสการเช่า</label>
                        <input id="text" @bind-value="item.Id" type="text" class="form-control" readonly>
                    </div>
                </Div>
                <Div Class="col">
                    <div class="form-group">
                        <label for="text">ห้อง</label>
                        <input id="text" @bind-value="room.RoomName" type="text" class="form-control" readonly>
                    </div>
                </Div>
            </Div>
            <Div Class="row">
                <Div Class="col">
                    <div class="form-group">
                        <label for="text">อาคาร</label>
                        <input id="text" @bind-value="buildings.Name" type="text" class="form-control" readonly>
                    </div>
                </Div>  
                <Div Class="col">
                     <div class="form-group">
                        <label for="text">รูปแบบการเช่า</label>
                        <input id="text" @bind-value="rentalmode" type="text" class="form-control" readonly>
                    </div>
                </Div>
            </Div>
            <Div Class="row">
                <Div Class="col">
                <div class="form-group">
                     <div class="form-group">
                        <label for="text">เข้าอยู่เมื่อ</label>
                        <input id="text" @bind-value="item.Stayed" type="text" class="form-control" readonly>
                    </div>
                    </Div>
                    </Div>
                    <Div Class="col">
                       <div class="form-group">
    <label for="text1">ค่าทำสัญญา</label> 
    <div class="input-group">
      <input id="text1" @bind-value="item.BookingFee" type="text" class="form-control"> 
      <div class="input-group-append">
        <div class="input-group-text">บาท</div>
      </div>
    </div>
  </div> 
                    </Div>
                        </Div>
        </ModalBody>
        <ModalFooter>
            <Button Class="btn btn-outline-primary" Disabled="isloading">Save Changes</Button>
            <Button Class="btn btn-outline-danger" @onclick="()=>e.Hide()">Discard</Button>

        </ModalFooter>
    </ModalContent>
</Modal>
